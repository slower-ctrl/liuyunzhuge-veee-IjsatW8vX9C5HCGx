## æ€ç»´å¯¼èˆª

* [å‰è¨€](https://github.com)
* [é¡¹ç›®ä»‹ç»](https://github.com)
* [é¡¹ç›®ç‰¹æ€§](https://github.com)
* [åˆ›å»ºæ§åˆ¶å°åº”ç”¨](https://github.com)
* [å®‰è£… NuGet åŒ…](https://github.com)
* [è¿›è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•](https://github.com)
* [æ€§èƒ½æµ‹è¯•å¤šç§æ ¼å¼è¾“å‡º](https://github.com)
* [é¡¹ç›®æºç åœ°å€](https://github.com)
* [ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰](https://github.com)

## å‰è¨€


åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸï¼Œæ€§èƒ½åŸºå‡†æµ‹è¯•æ˜¯ç¡®ä¿è½¯ä»¶ç³»ç»Ÿé«˜æ•ˆã€ç¨³å®šè¿è¡Œçš„é‡è¦ç¯èŠ‚ã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ è¯„ä¼°åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œäº†è§£å…¶åœ¨ä¸åŒæ¡ä»¶ä¸‹çš„å“åº”æ—¶é—´ã€ååé‡ã€èµ„æºåˆ©ç”¨ç‡ç­‰ã€‚é€šè¿‡åŸºå‡†æµ‹è¯•ï¼Œä½ å¯ä»¥ç¡®å®šç³»ç»Ÿåœ¨å¤„ç†ç‰¹å®šå·¥ä½œè´Ÿè½½æ—¶çš„æ€§èƒ½è¡¨ç°ã€‚


:[sloweråŠ é€Ÿå™¨](https://jisuanqi.org)## é¡¹ç›®ä»‹ç»


BenchmarkDotNetæ˜¯ä¸€ä¸ªåŸºäº.NETå¼€æºã€åŠŸèƒ½å…¨é¢ã€æ˜“äºä½¿ç”¨çš„æ€§èƒ½åŸºå‡†æµ‹è¯•æ¡†æ¶ï¼Œå®ƒä¸º.NETå¼€å‘è€…æä¾›äº†å¼ºå¤§çš„æ€§èƒ½è¯„ä¼°å’Œä¼˜åŒ–èƒ½åŠ›ã€‚é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•ã€å¤šå¹³å°æ”¯æŒã€é«˜çº§ç»Ÿè®¡åˆ†æå’Œè‡ªå®šä¹‰é…ç½®ç­‰ç‰¹æ€§ï¼ŒBenchmarkDotNetå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç†è§£å’Œä¼˜åŒ–è½¯ä»¶ç³»ç»Ÿçš„æ€§èƒ½è¡¨ç°ã€‚


![](https://img2024.cnblogs.com/blog/1336199/202411/1336199-20241127002020436-1016987117.png)


## é¡¹ç›®ç‰¹æ€§


* æ”¯æŒçš„è¯­è¨€ï¼šC\#ã€F\#ã€Visual Basicã€‚
* æ”¯æŒçš„æ“ä½œç³»ç»Ÿï¼šWindowsã€Linuxã€macOSã€‚
* æ”¯æŒçš„æ¶æ„ï¼šx86ã€x64ã€ARMã€ARM64ã€Wasm å’Œ LoongArch64ã€‚
* æ”¯æŒçš„è¿è¡Œæ—¶ï¼š.NET 5\+ã€.NET Framework 4\.6\.1\+ã€.NET Core 3\.1\+ã€Monoã€NativeAOTã€‚


## åˆ›å»ºæ§åˆ¶å°åº”ç”¨


åˆ›å»ºåä¸ºï¼š`BenchmarkDotNetExercise`çš„.NET 9æ§åˆ¶å°åº”ç”¨ã€‚


![](https://img2024.cnblogs.com/blog/1336199/202411/1336199-20241127002033812-513734735.png)


![](https://img2024.cnblogs.com/blog/1336199/202411/1336199-20241127002039233-1318643499.png)


## å®‰è£… NuGet åŒ…


åœ¨NuGetåŒ…ç®¡ç†å™¨ä¸­æœç´¢ï¼š`BenchmarkDotNet`Â åŒ…è¿›è¡Œå®‰è£…ï¼š


![](https://img2024.cnblogs.com/blog/1336199/202411/1336199-20241127002054435-2067804724.png)


## è¿›è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•


æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹.NETä¸­å¸¸è§çš„ä¸‰ç§åŠ å¯†å“ˆå¸Œå‡½æ•°ï¼š`MD5`ã€`SHA256`ã€`SHA1`è¿›è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•ï¼Œæ¥ä¸€èµ·åˆ†æä¸€ä¸‹å“ªä¸€ç§å“ˆå¸Œç®—æ³•æ€§èƒ½æ›´ä¼˜ã€æ•ˆç‡æ›´å¿«ã€‚


### HashFunctionsBenchmark



```
Â Â Â Â [MemoryDiagnoser]//è®°å½•å†…å­˜åˆ†é…æƒ…å†µ
Â Â Â Â publicÂ classÂ HashFunctionsBenchmark
Â Â Â Â {
Â Â Â Â Â Â Â Â privateÂ readonlyÂ stringÂ _inputData;

Â Â Â Â Â Â Â Â publicÂ HashFunctionsBenchmark()
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â //Â ä½¿ç”¨ä¸€ä¸ªè¾ƒé•¿çš„å­—ç¬¦ä¸²ä½œä¸ºè¾“å…¥ï¼Œä»¥æ›´å¥½åœ°åæ˜ å“ˆå¸Œå‡½æ•°çš„æ€§èƒ½
Â Â Â Â Â Â Â Â Â Â Â Â _inputDataÂ =Â newÂ string('y',Â 1000000);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â [Benchmark]
Â Â Â Â Â Â Â Â publicÂ byte[]Â MD5Hash()
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â usingÂ (MD5Â md5Â =Â MD5.Create())
Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â returnÂ md5.ComputeHash(Encoding.UTF8.GetBytes(_inputData));
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â [Benchmark]
Â Â Â Â Â Â Â Â publicÂ byte[]Â SHA256Hash()
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â usingÂ (SHA256Â sha256Â =Â SHA256.Create())
Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â returnÂ sha256.ComputeHash(Encoding.UTF8.GetBytes(_inputData));
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â [Benchmark]
Â Â Â Â Â Â Â Â publicÂ byte[]Â SHA1Hash()
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â usingÂ (SHA1Â sha1Â =Â SHA1.Create())
Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â returnÂ sha1.ComputeHash(Encoding.UTF8.GetBytes(_inputData));
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â }

```

### è¿è¡ŒåŸºå‡†æµ‹è¯•



```
Â Â Â Â internalÂ classÂ Program
Â Â Â Â {
Â Â Â Â Â Â Â Â staticÂ voidÂ Main(string[]Â args)
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â varÂ summaryÂ =Â BenchmarkRunner.Run();
Â Â Â Â Â Â Â Â }
Â Â Â Â }

```

æ³¨æ„ä¸€å®šè¦è®¾ç½®ä¸ºï¼š`Release`æ¨¡å¼è¿è¡Œï¼Œå‡å¦‚ä¸º`Debug`æ¨¡å¼ä¼šæç¤ºä¸‹é¢å¼‚å¸¸ï¼š



```
//Â ValidatingÂ benchmarks:
//Â Â Â Â *Â AssemblyÂ BenchmarkDotNetExerciseÂ whichÂ definesÂ benchmarksÂ isÂ non-optimized
BenchmarkÂ wasÂ builtÂ withoutÂ optimizationÂ enabledÂ (mostÂ probablyÂ aÂ DEBUGÂ configuration).Â Please,Â buildÂ itÂ inÂ RELEASE.
IfÂ youÂ wantÂ toÂ debugÂ theÂ benchmarks,Â pleaseÂ seeÂ https://benchmarkdotnet.org/articles/guides/troubleshooting.html#debugging-benchmarks.

```

![](https://img2024.cnblogs.com/blog/1336199/202411/1336199-20241127002118927-2026061094.png)


### åˆ†æç”Ÿæˆçš„æŠ¥å‘Š


![](https://img2024.cnblogs.com/blog/1336199/202411/1336199-20241127002134106-880954710.png)


#### è¯´æ˜ï¼š


* **Mean**: æ‰€æœ‰æµ‹é‡å€¼çš„ç®—æœ¯å¹³å‡å€¼ã€‚
* **Error**: 99\.9% ç½®ä¿¡åŒºé—´çš„ä¸€åŠã€‚
* **StdDev**: æ‰€æœ‰æµ‹é‡å€¼çš„æ ‡å‡†å·®ã€‚
* **Gen0**: ç¬¬ 0 ä»£ GC æ¯ 1000 æ¬¡æ“ä½œæ”¶é›†ä¸€æ¬¡ã€‚
* **Gen1**: ç¬¬ 1 ä»£ GC æ¯ 1000 æ¬¡æ“ä½œæ”¶é›†ä¸€æ¬¡ã€‚
* **Gen2**: ç¬¬ 2 ä»£ GC æ¯ 1000 æ¬¡æ“ä½œæ”¶é›†ä¸€æ¬¡ã€‚
* **Allocated**: æ¯æ¬¡æ“ä½œåˆ†é…çš„å†…å­˜ï¼ˆä»…æ‰˜ç®¡å†…å­˜ï¼ŒåŒ…å«æ‰€æœ‰å†…å®¹ï¼Œ1KB \= 1024Bï¼‰ã€‚
* **1 ms**: 1 æ¯«ç§’ï¼ˆ0\.001 ç§’ï¼‰ã€‚


#### æŠ¥å‘Šåˆ†æï¼š




| Method | Mean | Error | StdDev | Gen0 | Gen1 | Gen2 | Allocated |
| --- | --- | --- | --- | --- | --- | --- | --- |
| MD5Hash | 1\.952 ms | 0\.0169 ms | 0\.0158 ms | 197\.2656 | 197\.2656 | 197\.2656 | 976\.9 KB |
| SHA256Hash | 3\.907 ms | 0\.0157 ms | 0\.0147 ms | 195\.3125 | 195\.3125 | 195\.3125 | 976\.93 KB |
| SHA1Hash | 1\.780 ms | 0\.0231 ms | 0\.0193 ms | 197\.2656 | 197\.2656 | 197\.2656 | 976\.92 KB |


* MD5Hash çš„å¹³å‡è€—æ—¶ç¨é•¿äº SHA1Hashï¼Œä½†è¯¯å·®å’Œæ ‡å‡†å·®è¾ƒå°ï¼Œæ€§èƒ½ç¨³å®šæ€§è¾ƒå¥½ï¼Œåƒåœ¾å›æ”¶æ¬¡æ•°ä¸ SHA1Hash ç›¸åŒã€‚
* SHA256Hash çš„å¹³å‡è€—æ—¶æœ€é•¿ï¼Œä½†è¯¯å·®å’Œæ ‡å‡†å·®æœ€å°ï¼Œæ€§èƒ½ç¨³å®šæ€§æœ€å¥½ï¼Œåƒåœ¾å›æ”¶æ¬¡æ•°ç•¥å°‘äº MD5Hash å’Œ SHA1Hashã€‚
* SHA1Hash çš„å¹³å‡è€—æ—¶æœ€çŸ­ï¼Œä½†è¯¯å·®å’Œæ ‡å‡†å·®è¾ƒå¤§ï¼Œè¡¨ç¤ºå…¶æ€§èƒ½è™½ç„¶ä¼˜è¶Šä½†ä¸å¤ªç¨³å®šã€‚


## æ€§èƒ½æµ‹è¯•å¤šç§æ ¼å¼è¾“å‡º


* MarkdownExporterï¼šå¯¼å‡ºMarkdownæ ¼å¼ã€‚
* AsciiDocExporterï¼šå¯¼å‡ºAsciiDocæ ¼å¼ã€‚
* HtmlExporterï¼šå¯¼å‡ºHTMLæ ¼å¼ã€‚
* CsvExporterï¼šå¯¼å‡ºCSVï¼ˆé€—å·åˆ†éš”å€¼ï¼‰æ ¼å¼ã€‚
* RPlotExporterï¼šå¯¼å‡ºRç»˜å›¾æ–‡ä»¶æ ¼å¼ã€‚



```
[MarkdownExporter,Â AsciiDocExporter,Â HtmlExporter,Â CsvExporter,Â RPlotExporter]
publicÂ classÂ HashFunctionsBenchmark
{
}

```


![](https://img2024.cnblogs.com/blog/1336199/202411/1336199-20241127002158292-1942909670.png)


## é¡¹ç›®æºç åœ°å€


æ›´å¤šé¡¹ç›®å®ç”¨åŠŸèƒ½å’Œç‰¹æ€§æ¬¢è¿å‰å¾€é¡¹ç›®å¼€æºåœ°å€æŸ¥çœ‹ğŸ‘€ï¼Œåˆ«å¿˜äº†ç»™é¡¹ç›®ä¸€ä¸ªStaræ”¯æŒğŸ’–ã€‚


* å¼€æºåœ°å€ï¼š[https://github.com/dotnet/BenchmarkDotNet](https://github.com)
* æ–‡ç« ç¤ºä¾‹ï¼š[https://github.com/YSGStudyHards/DotNetExercises/tree/master/BenchmarkDotNetExercise](https://github.com)


## ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰


è¯¥é¡¹ç›®å·²æ”¶å½•åˆ°C\#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰ä¸­ï¼Œå…³æ³¨ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰èƒ½è®©ä½ åŠæ—¶äº†è§£C\#ã€.NETå’Œ.NET Coreé¢†åŸŸçš„æœ€æ–°åŠ¨æ€å’Œæœ€ä½³å®è·µï¼Œæé«˜å¼€å‘å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚å‘å·²æŒ–ï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒæäº¤PRæ¨èæˆ–è‡ªèï¼ˆè®©ä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶ä¸è¢«åŸ‹æ²¡ğŸ¤ï¼‰ã€‚


* GitHubå¼€æºåœ°å€ï¼š[https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md](https://github.com)
* Giteeå¼€æºåœ°å€ï¼š[https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md](https://github.com)



